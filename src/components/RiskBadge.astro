---
const { level = "moderate", ariaLabel } = Astro.props;

// Normalise input (fallback = moderate)
const normalized =
  level === "low" || level === "high" || level === "moderate"
    ? level
    : "moderate";

const className = `pg-risk-badge pg-risk-badge--${normalized}`;

const computedLabel =
  ariaLabel ||
  (normalized === "low"
    ? "Low risk"
    : normalized === "high"
    ? "High risk"
    : "Moderate risk");
---

<span
  class={className}
  role="status"
  aria-label={computedLabel}
  itemScope
  itemType="https://schema.org/MedicalRiskFactor"
>
  <span class="pg-risk-badge__dot" aria-hidden="true"></span>
  <span itemProp="name">
    <slot />
  </span>
</span>

