---
import { getCollection } from "astro:content";
const fmt = (v)=> new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(new Date(v));

const guides = (await getCollection("guides"))
  .sort((a,b)=> +new Date(a.data.publishDate) < +new Date(b.data.publishDate) ? 1 : -1);
---
<html lang="en">
  <head><meta charset="utf-8" /><title>Guides</title></head>
  <body>
    <main style="max-width:960px;margin:0 auto;padding:1.5rem;font-family:system-ui,sans-serif;">
      <h1>Guides</h1>
      <ul>
        {guides.map((g)=>(
          <li>
            <a href={`/guides/${g.slug}/`}>{g.data.title}</a>
            {g.data.publishDate && <> â€” <time>{fmt(g.data.publishDate)}</time></>}
            <div>{g.data.description}</div>
          </li>
        ))}
      </ul>
    </main>
  </body>
</html>




