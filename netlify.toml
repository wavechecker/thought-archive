[functions]
  directory = "netlify/functions"

# 410 (Gone) — keep force for hard removals
[[redirects]]
  from = "/posts/governments-cancel-science"
  to = "/404.html"
  status = 410
  force = true

[[redirects]]
  from = "/posts/governments-cancel-science/"
  to = "/404.html"
  status = 410
  force = true

# ---------- Canonical style: NO trailing slash ----------
# Normalize category hub slugs (301s should NOT force)
[[redirects]]
  from = "/guides/heart-and-circulation"
  to = "/guides/heart-circulation"
  status = 301

[[redirects]]
  from = "/guides/men-s-health"
  to = "/guides/mens-health"
  status = 301

[[redirects]]
  from = "/guides/women-s-health"
  to = "/guides/womens-health"
  status = 301

[[redirects]]
  from = "/guides/measles-vaccine"
  to = "/guides/measles-vaccination"
  status = 301
  force = true

[[redirects]]
  from = "/guides/measles-vaccine/"
  to = "/guides/measles-vaccination"
  status = 301
  force = true

# Use splat rule to cover both with and without slash + any child paths
[[redirects]]
  from = "/guides/child-adolescent-health-hub/*"
  to = "/guides/child-and-adolescent-health"
  status = 301

# ---------- Category listing normalization (stop trailing-slash loop) ----------
# /guides/category/mental-health/  ->  /guides/category/mental-health
[[redirects]]
  from = "/guides/category/:cat/"
  to = "/guides/category/:cat"
  status = 301

# Optional: normalize the category root to the main guides index
[[redirects]]
  from = "/guides/category"
  to = "/guides"
  status = 301

[[redirects]]
  from = "/guides/category/"
  to = "/guides"
  status = 301

# ---------- Mental health hub normalization ----------
# Send ALL legacy variants to the canonical no-slash URL
[[redirects]]
  from = "/guides/mental-health-crisis/*"
  to = "/guides/mental-health"
  status = 301

[[redirects]]
  from = "/guides/mental-health-guides/*"
  to = "/guides/mental-health"
  status = 301

# ---------- Consolidated guide redirects (2026-02-10 cleanup) ----------
# Skin cancer: superseded by combined guides
[[redirects]]
  from = "/guides/skin-cancer-diagnosis"
  to = "/guides/skin-cancer-diagnosis-treatment"
  status = 301
  force = true

[[redirects]]
  from = "/guides/skin-cancer-diagnosis/"
  to = "/guides/skin-cancer-diagnosis-treatment"
  status = 301
  force = true

[[redirects]]
  from = "/guides/skin-cancer-signs"
  to = "/guides/skin-cancer-signs-prevention"
  status = 301
  force = true

[[redirects]]
  from = "/guides/skin-cancer-signs/"
  to = "/guides/skin-cancer-signs-prevention"
  status = 301
  force = true

# UTI: plural → singular
[[redirects]]
  from = "/guides/urinary-tract-infections"
  to = "/guides/urinary-tract-infection"
  status = 301
  force = true

[[redirects]]
  from = "/guides/urinary-tract-infections/"
  to = "/guides/urinary-tract-infection"
  status = 301
  force = true

# T1D sick day: legacy word-order variant
[[redirects]]
  from = "/guides/sick-day-type-1-diabetes"
  to = "/guides/type-1-diabetes-sick-day-management"
  status = 301
  force = true

[[redirects]]
  from = "/guides/sick-day-type-1-diabetes/"
  to = "/guides/type-1-diabetes-sick-day-management"
  status = 301
  force = true

# Hep B birth dose: legacy guide variant
[[redirects]]
  from = "/guides/hepatitis-b-birth-dose-guide"
  to = "/guides/hepatitis-b-birth-dose-explained"
  status = 301
  force = true

[[redirects]]
  from = "/guides/hepatitis-b-birth-dose-guide/"
  to = "/guides/hepatitis-b-birth-dose-explained"
  status = 301
  force = true

# GLP-1 hyphenation: glp1 → glp-1
[[redirects]]
  from = "/guides/glp1-drugs-and-aging"
  to = "/guides/glp-1-drugs-and-aging"
  status = 301
  force = true

[[redirects]]
  from = "/guides/glp1-drugs-and-aging/"
  to = "/guides/glp-1-drugs-and-aging"
  status = 301
  force = true

[[redirects]]
  from = "/guides/ozempic-glp1-guide"
  to = "/guides/ozempic-glp-1-guide"
  status = 301
  force = true

[[redirects]]
  from = "/guides/ozempic-glp1-guide/"
  to = "/guides/ozempic-glp-1-guide"
  status = 301
  force = true

[[redirects]]
  from = "/guides/muscle-preservation-glp1"
  to = "/guides/muscle-preservation-glp-1"
  status = 301
  force = true

[[redirects]]
  from = "/guides/muscle-preservation-glp1/"
  to = "/guides/muscle-preservation-glp-1"
  status = 301
  force = true

# ==== BEGIN_MAINTENANCE (leave commented by default) ====
# [[redirects]]
#   from = "/*"
#   to = "/maintenance.html"
#   status = 200
#   force = true
# ==== END_MAINTENANCE ====
